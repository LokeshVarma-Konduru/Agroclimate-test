<!DOCTYPE html>
<html>
<head>
    <title>Agroclimate Viewer & Planner App</title>
    <!-- Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YLRKCN2672"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-YLRKCN2672');

        // Custom event tracking function
        function trackEvent(action, category, label) {
            gtag('event', action, {
                'event_category': category,
                'event_label': label
            });
        }
    </script>
</head>
<body style="margin:0; padding:0;">
    <!-- Replace YOUR_APP_URL with your deployed GEE app URL -->
    <iframe id="geeApp" style="width:100%; height:100vh; border:none;"></iframe>

    <script>
        // Function to handle messages from the GEE app
        window.addEventListener('message', function(event) {
            if (event.data && event.data.type === 'analytics') {
                trackEvent(event.data.action, event.data.category, event.data.label);
            }
        });

        // Load the GEE app
        window.onload = function() {
            // Track page view
            gtag('event', 'page_view');
            
            // Get the iframe element
            var iframe = document.getElementById('geeApp');
            
            // Replace this URL with your actual GEE app URL after deployment
            iframe.src = 'https://our-axon-435300-d4.projects.earthengine.app/view/agroclimate-v1';
        };
    </script>
</body>
</html>
